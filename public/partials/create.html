<link rel="stylesheet" href="stylesheets/create.css">

<div class="content-container">
	<div class="left-container">
		<div class="row">
			<div ng-show="showFind == true" class="show-find">
				<input type="text" placeholder="Find Text" ng-model="wordFind">
				<input type="text" placeholder="Replace With" ng-model="wordReplace">
				<button disabled>Replace One</button>
				<button ng-click="replaceAll()">Replace All</button>
			</div>
		</div>
		<div class="row topSelect">
			<select chosen
					ng-model="pageTypeName"
			        data-placeholder="Pick one of these"
			        disable-search="true" 
					ng-options="page.typename for page in pageTypes">
					<option value=""></option>
			</select>
			<div class="add-page-button" ng-click="addPage()">ADD PAGE +</div> {{pageError}}
		</div>
		<div class="row pages">
			<div class="pages-container" ng-model="propInfo.pages">
				<section ng-repeat="page in propInfo.pages track by $index" 
						class="page" 
						ng-show="$index===currentPage">
					<div class="pageHeader elementContainer">
						<span>Page {{currentPage+1}}:{{page.typename}}</span>
						<button class="delete" ng-click="deletePage($index)">DELETE PAGE X</button>
					</div>
					<div class="colorOption elementContainer">
						<div class="insiderColor" ng-show="page.pagesetup.header.exists">
							<div>
								<ui-colorpicker ng-model="page.pagesetup.header.settings.color"></ui-colorpicker>
								<font>Header</br>Color</font>
								image:<input type="checkbox" ng-model="page.pagesetup.header.settings.image"/>
							</div>
							<div id="dropzone" ng-click="updateImage($index,0,'header')" dropzone="dropzoneConfig" 
									ng-show="page.pagesetup.header.settings.image">
							</div>     
						</div>
						<div class="insiderColor">
							<ui-colorpicker ng-model="page.background.color"></ui-colorpicker><font>Background </br>Color</font>
						</div>  
						<div class="insiderColor" ng-show="page.pagesetup.footer.exists">
							<div>
								<ui-colorpicker ng-model="page.pagesetup.footer.settings.color"></ui-colorpicker>
								<font>Footer</br>Color</font>
								image:<input type="checkbox" ng-model="page.pagesetup.footer.settings.image"/>
							</div>
							<div id="dropzone" dropzone="dropzoneConfig" ng-show="page.pagesetup.footer.settings.image"
							ng-click="updateImage($index,0,'footer')">
							</div>
						</div>
					</div>
					<div ng-repeat="head in page.pagesetup.heading track by $index" class="elementContainer">
						<div class="elementHeader">HEADING {{$index+1}}</div>
						<div class="textEditor">
							<div class="elem">
								<font class="smallFont" 
									  ng-click="head.settings.size=10"
									  ng-class="{elemSelected:(head.settings.size==10)}">hi</font>
								<font class="mediumFont" 
									  ng-click="head.settings.size=12"
									  ng-class="{elemSelected:(head.settings.size==12)}">hi</font>
								<font class="largeFont" 
									  ng-click="head.settings.size=14"
									  ng-class="{elemSelected:(head.settings.size==14)}"> hi</font>
							</div>
							<div class="elem">
								<font class="boldFont" 
									  ng-click="head.settings.bold=!head.settings.bold"
									  ng-class="{elemSelected:head.settings.bold}">B</font>
								<font class="italicFont" 
									  ng-click="head.settings.italic=!head.settings.italic"
									  ng-class="{elemSelected:head.settings.italic}">B</font>
								<font class="underlineFont" 
									  ng-click="head.settings.underline=!head.settings.underline"
									  ng-class="{elemSelected:head.settings.underline}"> B</font>
							</div>
							<div class="elem"><ui-colorpicker ng-model="head.settings.color"></ui-colorpicker>
							</div>
							<div class="selectorEditor"> 
								<select chosen disable-search="true" 
										disable-search="true"
        								data-placeholder="{{head.settings.font}}"
										ng-model="head.settings.font">
									<option selected value="Times-Roman">Times-Roman</option>
									<option value="Helvetica">Helvetica</option>
									<option value="Courier">Courier</option>
									<option value=""></option>
								</select>
							</div>
						</div>
						<input type="text" placeholder="Heading Text" ng-model="head.content">
					</div>    
					<div ng-repeat="textbody in page.pagesetup.textbody track by $index" class="elementContainer">
						<div class="elementHeader">TEXT BODY {{$index+1}}</div>
						<div class="textEditor">
							<div class="elem">
								<font class="smallFont" 
									  ng-click="textbody.settings.size=10"
									  ng-class="{elemSelected:(textbody.settings.size==10)}">hi</font>
								<font class="mediumFont" 
									  ng-click="textbody.settings.size=12"
									  ng-class="{elemSelected:(textbody.settings.size==12)}">hi</font>
								<font class="largeFont" 
									  ng-click="textbody.settings.size=14"
									  ng-class="{elemSelected:(textbody.settings.size==14)}"> hi</font>
							</div>
							<div class="elem">
								<font class="boldFont" 
									  ng-click="textbody.settings.bold=!textbody.settings.bold"
									  ng-class="{elemSelected:textbody.settings.bold}">B</font>
								<font class="italicFont" 
									  ng-click="textbody.settings.italic=!textbody.settings.italic"
									  ng-class="{elemSelected:textbody.settings.italic}">B</font>
								<font class="underlineFont" 
									  ng-click="textbody.settings.underline=!textbody.settings.underline"
									  ng-class="{elemSelected:textbody.settings.underline}"> B</font>
							</div>
							<div class="elem"><ui-colorpicker ng-model="textbody.settings.color"></ui-colorpicker>
							</div>
							<div class="selectorEditor"> 
								<select chosen disable-search="true" 
										disable-search="true"
        								data-placeholder="{{textbody.settings.font}}"
										ng-model="textbody.settings.font">
									<option selected value="Times-Roman">Times-Roman</option>
									<option value="Helvetica">Helvetica</option>
									<option value="Courier">Courier</option>
									<option value=""></option>
								</select>
							</div>
						</div>
						<textarea  id="textBodyId" placeholder="Textbody Text" ng-model="textbody.content">
						</textarea>   
					</div>
					<div ng-repeat="imagearea in page.pagesetup.imagearea track by $index" class="elementContainer">
						<div class="elementHeader">IMAGE {{$index+1}}</div>
						<div id="dropzone" dropzone="dropzoneConfig" 
							ng-click="updateImage($index,$parent.$index,'image')">
						</div>
					</div>
					<div ng-repeat="etc in page.pagesetup.etc" class="elementContainer">
						<div ng-show="etc.assettype == 'table'">

							<div class="elementHeader">TABLE {{$index+1}}</div>
							<div class="textEditor">
								<div class="elem">
									<font class="boldFont" 
										  ng-click="etc.settings.bold=!etc.settings.bold"
										  ng-class="{elemSelected:etc.settings.bold}">B</font>
									<font class="italicFont" 
										  ng-click="etc.settings.italic=!etc.settings.italic"
										  ng-class="{elemSelected:etc.settings.italic}">B</font>
								</div>
								<div class="elem"><ui-colorpicker ng-model="etc.settings.color"></ui-colorpicker>
								</div>
								<div class="selectorEditor"> 
									<select chosen disable-search="true" 
											disable-search="true"
	        								data-placeholder="{{etc.settings.font}}"
											ng-model="etc.settings.font">
										<option selected value="Times-Roman">Times-Roman</option>
										<option value="Helvetica">Helvetica</option>
										<option value="Courier">Courier</option>
										<option value=""></option>
									</select>
								</div>
							</div>
							<div class="inputRowsCols">
								<div class="input-number">
									<div class="leftInputNumber">
										<input type="text" class="table-title" ng-model="etc.settings.rows" ng-change="updateTable(etc.settings.columns,etc.settings.rows,$index,$parent.$index)"/> 
									</div>
									<div class="rightInputNumber">
										<div ng-click="etc.settings.rows=increaseRow(etc.settings.columns,etc.settings.rows,$index,$parent.$index)">&and;</div>
										<div ng-click="etc.settings.rows=decreaseRow(etc.settings.columns,etc.settings.rows,$index,$parent.$index)">&or;</div>
									</div>
								</div>
								<div class="colrow"><font>Rows{{count}}</font></div>

								<div class="input-number" style="margin-left:20px;">
									<div class="leftInputNumber">
										<input 	type="text" 
												class="table-title" 
												ng-model="etc.settings.columns" 
												ng-change="updateTable(etc.settings.columns,etc.settings.rows,$index,$parent.$index)"/>
									</div>
									<div class="rightInputNumber">
										<div ng-click="etc.settings.columns=increaseCol(etc.settings.columns,etc.settings.rows,$index,$parent.$index)">&and;</div>
										<div ng-click="etc.settings.columns=decreaseCol(etc.settings.columns,etc.settings.rows,$index,$parent.$index)"
											 >&or;</div>
									</div>
								</div>
								<div class="colrow"><font>Columns</font></div>
								<div class="borderSelector">
									<div class="borderInsider">
										<font>Border</font>
									</div>
									<div class="borderInsider">
										<input type="checkbox" ng-model="etc.settings.borderexists"/>
									</div>
									<div class="borderInsider">
										<ui-colorpicker ng-show="etc.settings.borderexists" ng-model="etc.settings.bordercolor"></ui-colorpicker>
									</div>
								</div>
							</div>
							<div>
								<table class="table"> 
									<tr ng-repeat="row in range(etc.settings.rows) track by $index " style="display:flex">
										<td ng-repeat="col in range(etc.settings.columns) track by $index">
											<input ng-repeat="item in etc.content"
											ng-show="check(item,$parent.$parent.$index,$parent.$index)"
											ng-model="item.text">
										</td>
									</tr>
								</table>
							</div>
						</div>
						<div ng-show="etc.assettype=='box'">
							<div class="elementHeader">BOX {{$index+1}}</div>
							<ui-colorpicker ng-model="etc.settings.background.color"></ui-colorpicker>
						</div>
						<div ng-show="etc.assettype == 'pricing'">
							<div class="elementHeader">PRICING TABLE {{$index+1}}</div>
							<div class="pricingEditor">
								<ui-colorpicker ng-model="etc.settings.color"></ui-colorpicker>
								<select chosen disable-search="true" ng-model="etc.settings.font">
									<option value="Times-Roman">Times-Roman</option>
									<option value="Helvetica">Helvetica</option>
									<option value="Courier">Courier</option>
								</select>
							</div>
							<div class="add-package" ng-click="addPackage($parent.$index,$index)">ADD PACKAGE +</div>
							<div class="service-package" ng-repeat="package in etc.settings.pagetext track by $index">
								<div class="delete-package" ng-click="deletePackage($parent.$parent.$index,$parent.$index,$index)" ng-show="$index!=0">X
								</div>
								<div class="pricingHeader">
									<div style=" margin-left: 0; ">
										<p>Name </p>
										<input type="text" class="table-title" ng-model="package.pname">
									</div>
									<div>
										<p>Timeframe</p>
										<input type="text" class="table-timeframe" ng-model="package.ptime">
									</div>
									<div>
									<p>Subtotal</p>
									<input type="text" class="table-subtotal" ng-model="package.psub">
									</div>
								</div>
								<div class="pricingHeader">
										<input type="checkbox" ng-model="etc.settings.existsDiscount"/>
										$ <input type="text" ng-model="etc.settings.discount" ng-show="etc.settings.existsDiscount"/>
									<input type="checkbox" ng-model="etc.settings.existsTax"/>
									% <input type="text" ng-model="etc.settings.tax" ng-show="etc.settings.existsTax"/>
								</div>
								<div class="subservice" ng-repeat="subservice in package.pservice track by $index">
									<input type="text" class="subservice-name" ng-model="subservice.text">
									<div class="delete-subservice" ng-click="deleteSubservice($parent.$parent.$parent.$index,$parent.$parent.$index,$parent.$index,$index)">x</div>
								</div>
								<div class="add-subservice" ng-click="addSubservice($parent.$parent.$index,$parent.$index,$index)">ADD SUBSERVICE +</div>
							</div>
						</div>
					</div>
				</section>
			</div>
		</div>
	</div>
	<div class="right-container">
		
		<iframe id="preview" seamless></iframe>
	</div>
	<div id="bottomMenu">
		<div id="pageDirectory">
			<div ng-click="previousPage(propInfo.pages.length)" >< </div> 
			<div ng-show="beginDots">...</div>
			<div ng-repeat="pageNumber in range(5) track by $index">
				<div ng-click="selectPage($index+shift)" 
					 ng-show="$index<propInfo.pages.length"
					 ng-class="{pageActive:($index+shift)==currentPage}">{{$index+shift+1}}</div>
				<div ng-click="selectPage($index+shift)" ng-show="$index>=propInfo.pages.length">.</div>
			</div>
			<div ng-show="endDots">...</div>
			<div ng-click="nextPage(propInfo.pages.length)" ng-init="currentPage=0"> > </div>	
		</div>
		<div id="generateButton">
			<button id="generate" ng-click="genProposal()">UPDATE PREVIEW</button>
		</div>
		<div id="saveMenu">
			<button id="saveProp" ng-click="saveProposal()">Save</button>
			<input id="saveProp-name" type="text" placeholder="name" ng-model="propSaveName">
			<div class="saveConfirm"><p>{{saveConfirm}}</p></div>
		</div>
	</div>
</div>
<script src='https://ajax.googleapis.com/ajax/libs/angularjs/1.2.4/angular.min.js'></script>
<script src='https://ajax.googleapis.com/ajax/libs/angularjs/1.2.4/angular-sanitize.min.js'></script>
<script src='http://cdnjs.cloudflare.com/ajax/libs/textAngular/1.1.2/textAngular.min.js'></script>